\usepackage{geometry}
\geometry{a4paper, margin=1in}
\usepackage{caption}
\usepackage{fancyhdr}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{emptypage}
\usepackage[]{algorithm2e}
\usepackage{cite}
\usepackage{calc}
\usepackage{lipsum}
\usepackage{color}
\usepackage{ragged2e}
\usepackage[inline]{enumitem}
\usepackage[dvipsnames]{xcolor}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{fontspec}
\usepackage{tabu}
\usepackage{hyperref}
\usepackage[outputdir=build]{minted}
\usepackage[skip=12pt,indent=2em]{parskip}
\usepackage{setspace}
\usepackage{textcomp}
\usepackage{etoolbox}
\usepackage{xpatch}
\usepackage{pdfpages}
\usepackage{xepersian}

\settextfont[Path=./Fonts/,
    BoldFont={XB Yas Bd},
    ItalicFont={XB Yas It},
    BoldItalicFont={XB Yas BdIt},
    Extension = .ttf]{XB Yas}

% ----- Theo ----- %

\newcounter{theo}[section]\setcounter{theo}{0}
\renewcommand{\thetheo}{\arabic{section}.\arabic{theo}}
\newenvironment{name}[args]{begin_def}{end_def}

\newenvironment{theo}[2][]{%
    \refstepcounter{theo}

% Code for box design goes here.

    \begin{mdframed}[]
        \relax}{%
    \end{mdframed}
}

\ifstrempty{#1}%
% if condition (without title)
{\mdfsetup{%
    frametitle={%
    \tikz[baseline=(current bounding box.east),outer sep=0pt]
    \node[anchor=east,rectangle,fill=blue!20]
    %{\strut نکته~\thetheo};}
    {\strut نکته~};}
}%
% else condition (with title)
}{\mdfsetup{%
    frametitle={%
    \tikz[baseline=(current bounding box.east),outer sep=0pt]
    \node[anchor=east,rectangle,fill=blue!20]
%    {\strut نکته~\thetheo:~#1};}%
    {\large \strut ~نکته~};}
%    {\strut ~نکته~};}%
}%
}%
% Both conditions
\mdfsetup{%
    innertopmargin=3pt,linecolor=blue!20,%
    linewidth=2pt,topline=true,%
    frametitleaboveskip=\dimexpr-\ht\strutbox\relax%
}

%\settextfont[Path=./Fonts/,
%BoldFont={B Mitra Bold_0},
%ItalicFont={B Mitra_0},
%BoldItalicFont={B Mitra_0},
%Extension = .ttf]{B Mitra_0}


%\newcommand*{\fontTitr}{\fontfamily{cmr}\selectfont}
%\DeclareTextFontCommand{\fontBTitr}{\fontTitr}
\defpersianfont\BTitr[Path=./Fonts/, Extension = .ttf]{BTitr}
\defpersianfont\BNazanin[Path=./Fonts/, Extension = .ttf]{BNAZANIN}
\newcommand*\rullCenterTextWithLine[1]{\par\noindent\raisebox{.8ex}{\makebox[\linewidth]{\hrulefill\hspace{1ex}\raisebox{-.8ex}{#1}\hspace{1ex}\hrulefill}}}
\newcommand{\rullFillWithLine}[2][0em]{\leaders\hbox{\rule[#1]{1pt}{#2}}\hfill}